<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/drop.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>拖拽</title>
    <style>

    </style>
</head>

<body>
    <div class="container">
        <div class="drop_wrap">
            <div id="drag" class="box"></div>
        </div>
    </div>
</body>

</html>
<script>
    var obox = document.getElementById('drag')

    //限制最大宽高，不让滑块出去
    var maxW = document.body.clientWidth - div1.offsetWidth;
    var maxH = document.body.clientHeight - div1.offsetHeight;

    // if (oLeft < 0) {
    //     oLeft = 0;
    // } else if (oLeft >= maxW) {
    //     oLeft = maxW;
    // }
    // if (oTop < 0) {
    //     oTop = 0;
    // } else if (oTop >= maxH) {
    //     oTop = maxH;
    // }


    //1、给需要移动的元素添加onmousedown事件,给拖动做好准备
    obox.onmousedown = function (evt) {
        var oEvent = evt || event; //获取事件对象，这个是兼容写法
        var disX = oEvent.clientX - this.offsetLeft;
        var disY = oEvent.clientY - this.offsetTop;

        //这里就解释为什么要给document添加onmousemove时间，原因是如果你给obox添加这个事件的时候，当你拖动很快的时候就很快脱离这个onmousemove事件，而不能实时拖动它
        document.onmousemove = function (evt) { //实时改变目标元素obox的位置
            var oEvent = evt || event;
            obox.style.left = oEvent.clientX - disX + 'px';
            obox.style.top = oEvent.clientY - disY + 'px';
        }
        //停止拖动
        document.onmouseup = function () {
            document.onmousemove = null;
            document.onmouseup = null;
        }
    }
</script>